name: Deploy Subdirectories to GitHub Pages

on:
  push:
    branches:
      - main

permissions:
  contents: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Deploy Subdirectories
        run: |
          find . -type d -not -path '*/\.*' -print0 | while IFS= read -r -d '' subdir; do
            cd "$subdir"
            git init
            git config user.name "GitHub Actions"
            git config user.email "github-actions[bot]@users.noreply.github.com"
            git add .
            git commit -m "Deploy $subdir to GitHub Pages"
            git push --force --quiet "https://${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}" master:gh-pages
            cd ..
          done
